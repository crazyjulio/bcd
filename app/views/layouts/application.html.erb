<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="m6aCl_TMUyZi-kR1BIijxqWbYrix12cNmvBR7VWX6U0" name="google-site-verification"/>
    <meta content="<%= meta_keywords %>" name="keywords"/>
    <meta content="<%= meta_description %>" name="description"/>
    <meta content="<%= opengraph_metadata[:image] %>" property="og:image"/>
    <meta content="<%= content_for?(:title) ? yield(:title) : "Brick City Depot" %>" property="og:title"/>
    <meta content="<%= opengraph_metadata[:description] %>" property="og:description"/>
    <meta content="<%= opengraph_metadata[:app_id] %>" property="fb:app_id"/>
    <meta content="<%= opengraph_metadata[:site_name] %>" property="og:site_name"/>
    <meta content="<%= opengraph_metadata[:url] %>" property="og:url"/>
    <%= favicon_link_tag 'favicon.ico' %>
    <title><%= content_for?(:title) ? yield(:title) : "Brick City Depot" %></title>
    <%= stylesheet_link_tag 'application' %>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <%= javascript_include_tag 'application' %>
    <%= csrf_meta_tags %>
    <%= yield :head %>
  </head>

  <body>
    <div class="container">
      <div class="nav-scroller">
        <nav class="navbar navbar-expand-lg navbar-custom fixed-top">
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon">
              <i class="fa fa-bars"></i>
            </span>
          </button>
          <a class="navbar-brand" href="/"><%= image_tag('logo180x115.png', alt: "BCD logo", title: "Brick City Depot", class: 'img-fluid navbar-brand-logo') %></a>
          <div id="navbar" class="collapse navbar-collapse">
            <div>
              <%= link_to "Home", root_path, class: 'p-2 text-white' %>
              <%= link_to 'Instructions', store_products_path(product_type_name: 'Instructions'), class: 'p-2 text-white' %>
              <%= link_to 'Models', store_products_path(product_type_name: 'Models'), class: 'p-2 text-white' %>
              <%= link_to 'Kits', store_products_path(product_type_name: 'Kits'), class: 'p-2 text-white' %>
              <%= link_to "Account", account_path, class: 'p-2 text-white' %>
              <%= link_to "FAQ", faq_path, class: 'p-2 text-white' %>
              <%= link_to "Contact", contact_path, class: 'p-2 text-white' %>
              <%= link_to 'New User Tutorial', new_user_tutorial_path, class: 'p-2 text-white' %>
            </div>
            <div class="mr-auto"></div>
            <div class="navbar-right">
              <%= render :partial => 'shared/cart_info', locals: {cart: @cart} %>
            </div>
          </div>
        </nav>
      </div>
    </div>

    <main>
      <% unless current_page?(root_path) %>
        <div class="header-spacer"></div>
        <%= render partial: 'shared/notifications' %>
        <div class="container">
          <% if @cart && @cart.errors.any? %>
            <ul class="cart_errors">
              <% @cart.errors.full_messages.each do |msg| %>
                <li class="cart_error">
                  <%= msg %>
                </li>
              <% end %>
            </ul>
          <% end %>
        </div>
      <% end %>

      <%= yield %>
    </main>

    <footer class="footer">
      <%= render :partial => 'shared/footer' %>
    </footer>
    <%= render :partial => 'shared/google_analytics_code' %>
    <%= render :partial => 'shared/google_social_profile' %>
    <script>
      window.onpageshow = function () {
        var cookie = getCookie('show_thank_you');
        if (cookie) {
          window.location.replace('/thank_you')
        }
      }

      function getCookie(name) {
        var value = "; " + document.cookie;
        var parts = value.split("; " + name + "=");
        if (parts.length == 2) {
          return parts.pop().split(";").shift();
        }
      }
    </script>
  </body>
</html>